import { Component, Input } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Subscription } from 'rxjs';
import { GoodImplementationService } from '../../services/good-implementation.service';
import { BadImplementationService } from '../../services/bad-implementation.service';

@Component({
  selector: 'app-missingauth',
  imports: [CommonModule, FormsModule],
  templateUrl: './missingauth.component.html',
  styleUrl: './missingauth.component.css',
})
export class MissingAuthComponent {
 showModal = false;

  currentUser = {
    id: 2,
    username: 'viewer_user',
    role: 'user', // use admin  for bad implementation?
  };

  profile = {
    id: 1,
    username: 'Tony\'s Blog',
    bio: 'Welcome to my blog!.',
    posts: [
      { caption: 'Vacation Journal ðŸŒ´', likes: 120 },
      { caption: 'Coffee Recipe â˜•', likes: 89 },
      { caption: 'Midterm Stress ðŸ˜­', likes: 20 },
    ],
  };

  get canEditProfile(): boolean {
    return this.currentUser.id === this.profile.id || this.currentUser.role === 'admin';
  }

  get canEditPosts(): boolean {
    return this.currentUser.id === this.profile.id || this.currentUser.role === 'admin';
  }

  attemptAdminAccess() {
    if (this.currentUser.role !== 'admin') {
      this.toggleModal();
      return;
    }
    console.log('Admin panel accessed');
  }

  toggleModal() {
    this.showModal = !this.showModal;
  }
}
